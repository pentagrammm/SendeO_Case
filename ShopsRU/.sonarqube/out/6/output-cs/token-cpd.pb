î
HC:\Users\Yasin\Desktop\ShopsRU\ShopsRU.Api\Controllers\BillController.cs
	namespace 	
ShopsRU
 
. 
Api 
. 
Controllers !
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
BillController 
:  !
ControllerBase" 0
,0 1
IBillController1 @
{ 
private 
readonly 
IBillServicePL '
_billServicePL( 6
;6 7
public 
BillController 
( 
IBillServicePL ,
billServicePL- :
): ;
{ 	
_billServicePL 
= 
billServicePL *
;* +
} 	
[ 	
HttpGet	 
( 
$str  
)  !
]! "
public $
CalculateBillResponseDto '
CalculateBill( 5
(5 6#
CalculateBillRequestDto6 M
requestN U
)U V
{ 	
return  
BaseResponseExecuter '
.' (
Execute( /
(/ 0
(0 1
)1 2
=>3 5
_billServicePL6 D
.D E
CalculateBillE R
(R S
requestS Z
)Z [
)[ \
;\ ]
} 	
} 
} ª

5C:\Users\Yasin\Desktop\ShopsRU\ShopsRU.Api\Program.cs
	namespace

 	
ShopsRU


 
.

 
Api

 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} §?
5C:\Users\Yasin\Desktop\ShopsRU\ShopsRU.Api\Startup.cs
	namespace 	
ShopsRU
 
. 
Api 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public!! 
void!! 
ConfigureServices!! %
(!!% &
IServiceCollection!!& 8
services!!9 A
)!!A B
{"" 	
services## 
.## 
AddControllers## #
(### $
)##$ %
.##% &
AddNewtonsoftJson##& 7
(##7 8
)##8 9
;##9 :
services$$ 
.$$ 
AddDbContext$$ !
<$$! "
ShopsRuContext$$" 0
>$$0 1
($$1 2
options$$2 9
=>$$: <
options$$= D
.$$D E
UseInMemoryDatabase$$E X
($$X Y
$str$$Y b
)$$b c
)$$c d
;$$d e
services&& 
.&& 
AddTransient&& !
<&&! "
IBillServicePL&&" 0
,&&0 1
BillServicePL&&2 ?
>&&? @
(&&@ A
)&&A B
;&&B C
services'' 
.'' 
AddTransient'' !
<''! "
IBillServiceBll''" 1
,''1 2
BillServiceBll''3 A
>''A B
(''B C
)''C D
;''D E
services(( 
.(( 
AddTransient(( !
(((! "
typeof((" (
(((( )
ShopsRuContext(() 7
)((7 8
)((8 9
;((9 :
})) 	
public,, 
void,, 
	Configure,, 
(,, 
IApplicationBuilder,, 1
app,,2 5
,,,5 6
IWebHostEnvironment,,7 J
env,,K N
),,N O
{-- 	
var.. 
scope.. 
=.. 
app.. 
... 
ApplicationServices.. /
.../ 0
CreateScope..0 ;
(..; <
)..< =
;..= >
var// 
context// 
=// 
scope// 
.//  
ServiceProvider//  /
./// 0
GetRequiredService//0 B
<//B C
ShopsRuContext//C Q
>//Q R
(//R S
)//S T
;//T U
AddFakeData00 
(00 
context00 
)00  
;00  !
if33 
(33 
env33 
.33 
IsDevelopment33 !
(33! "
)33" #
)33# $
{44 
app55 
.55 %
UseDeveloperExceptionPage55 -
(55- .
)55. /
;55/ 0
}66 
app88 
.88 
UseHttpsRedirection88 #
(88# $
)88$ %
;88% &
app:: 
.:: 

UseRouting:: 
(:: 
):: 
;:: 
app<< 
.<< 
UseAuthorization<<  
(<<  !
)<<! "
;<<" #
app>> 
.>> 
UseEndpoints>> 
(>> 
	endpoints>> &
=>>>' )
{?? 
	endpoints@@ 
.@@ 
MapControllers@@ (
(@@( )
)@@) *
;@@* +
}AA 
)AA 
;AA 
}BB 	
privateDD 
staticDD 
voidDD 
AddFakeDataDD '
(DD' (
ShopsRuContextDD( 6
contextDD7 >
)DD> ?
{EE 	
varGG 
	discount1GG 
=GG 
newGG 
DiscountGG  (
{HH 
IdII 
=II 
GuidII 
.II 
ParseII 
(II  
$strII  F
)IIF G
,IIG H
NameJJ 
=JJ 
$strJJ /
,JJ/ 0
RatioKK 
=KK 
$numKK 
}LL 
;LL 
varNN 
	discount2NN 
=NN 
newNN 
DiscountNN  (
{OO 
IdPP 
=PP 
GuidPP 
.PP 
ParsePP 
(PP  
$strPP  F
)PPF G
,PPG H
NameQQ 
=QQ 
$strQQ <
,QQ< =
RatioRR 
=RR 
$numRR 
}SS 
;SS 
varUU 
	discount3UU 
=UU 
newUU 
DiscountUU  (
{VV 
IdWW 
=WW 
GuidWW 
.WW 
ParseWW 
(WW  
$strWW  F
)WWF G
,WWG H
NameXX 
=XX 
$strXX >
,XX> ?
RatioYY 
=YY 
$numYY 
}ZZ 
;ZZ 
var\\ 
	customer1\\ 
=\\ 
new\\ 
Customer\\  (
{]] 
Id^^ 
=^^ 
Guid^^ 
.^^ 
Parse^^ 
(^^  
$str^^  F
)^^F G
,^^G H
Name__ 
=__ 
$str__ 
,__ 
Surname`` 
=`` 
$str`` %
,``% &

DiscountIdaa 
=aa 
Guidaa !
.aa! "
Parseaa" '
(aa' (
$straa( N
)aaN O
}bb 
;bb 
vardd 
	customer2dd 
=dd 
newdd 
Customerdd  (
{ee 
Idff 
=ff 
Guidff 
.ff 
Parseff 
(ff  
$strff  F
)ffF G
,ffG H
Namegg 
=gg 
$strgg 
,gg 
Surnamehh 
=hh 
$strhh "
,hh" #

DiscountIdii 
=ii 
Guidii !
.ii! "
Parseii" '
(ii' (
$strii( N
)iiN O
}jj 
;jj 
varll 
	customer3ll 
=ll 
newll 
Customerll  (
{mm 
Idnn 
=nn 
Guidnn 
.nn 
Parsenn 
(nn  
$strnn  F
)nnF G
,nnG H
Nameoo 
=oo 
$stroo 
,oo 
Surnamepp 
=pp 
$strpp !
,pp! "

DiscountIdqq 
=qq 
Guidqq !
.qq! "
Parseqq" '
(qq' (
$strqq( N
)qqN O
}rr 
;rr 
vartt 
	customer4tt 
=tt 
newtt 
Customertt  (
{uu 
Idvv 
=vv 
Guidvv 
.vv 
Parsevv 
(vv  
$strvv  F
)vvF G
,vvG H
Nameww 
=ww 
$strww 
,ww  
Surnamexx 
=xx 
$strxx !
,xx! "
}yy 
;yy 
context{{ 
.{{ 
Add{{ 
({{ 
	discount1{{ !
){{! "
;{{" #
context|| 
.|| 
Add|| 
(|| 
	discount2|| !
)||! "
;||" #
context}} 
.}} 
Add}} 
(}} 
	discount3}} !
)}}! "
;}}" #
context 
. 
Add 
( 
	customer1 !
)! "
;" #
context
 
.
 
Add
 
(
 
	customer2
 !
)
! "
;
" #
context
 
.
 
Add
 
(
 
	customer3
 !
)
! "
;
" #
context
 
.
 
Add
 
(
 
	customer4
 !
)
! "
;
" #
context
 
.
 
SaveChanges
 
(
  
)
  !
;
! "
}
 	
}
 
} 